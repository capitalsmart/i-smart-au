/* 
 * @author: Innam Hunzai <innam@techarete.com>
 * @project: Car Parts SVG Tool 
 * @version: 1.0 beta
 */

function toolItem(color, label, symbol, notation, buttonClass, data, scale,boundingElementData) {
    this.color = color;
    this.label = label;
    this.symbol = symbol;
    this.notation = notation;
    this.buttonClass = buttonClass;
    this.data = data;
    this.scale = scale;
    this.boundingElementData = boundingElementData;
}

function toolBar(divElementId) {
    this.elementId = divElementId;
    this.currentOption = false;
    this.getCurrentOptionKey = function (){
        return $(toolbar.currentOption).attr("data-key");
    }
    this.currentOptionDetail = getCurrentOptionDetail;
    this.show = show;
    this.hide = hide;
    this.reset = function () {
        $(".toolbarItem.active").trigger("click");
    }

    this.items = {
        dent: new toolItem(
                "red",
                "Dent",
                "path",
                "D",
                "btn-default",
                ["M1184 4430 c10 -43 207 -1383 204 -1386 -2 -1 -219 8 -483 22 -264 13 -499 23 -522 22 l-41 -3 304 -229 c167 -126 306 -232 309 -236 2 -4 -207 -107 -466 -230 -258 -123 -468 -224 -467 -225 2 -1 207 4 457 12 250 7 455 12 457 10 1 -1 -49 -168 -112 -370 -63 -203 -114 -375 -114 -382 0 -8 163 64 412 181 227 107 415 193 419 192 3 -2 -98 -399 -227 -883 -128 -484 -231 -881 -229 -883 4 -4 -23 -47 556 873 253 402 463 731 467 733 4 1 77 -108 162 -243 130 -205 156 -241 162 -222 4 12 30 150 58 307 28 157 53 291 56 298 5 16 -51 64 635 -547 305 -272 562 -501 573 -510 25 -22 26 -24 -373 704 -187 341 -339 621 -338 621 1 1 67 12 147 24 80 11 155 24 167 28 19 6 -17 39 -254 231 l-276 224 286 144 c158 79 287 144 287 146 0 1 -177 -4 -392 -10 -216 -7 -410 -12 -430 -10 -36 2 -27 10 663 636 385 349 698 635 696 637 -2 2 -111 -54 -243 -125 -964 -518 -1495 -801 -1501 -801 -5 1 -35 60 -67 133 -33 73 -63 136 -68 142 -5 6 -67 -50 -157 -139 -131 -131 -150 -146 -159 -130 -5 11 -130 296 -277 634 -147 338 -272 620 -277 625 -6 6 -7 1 -4 -15z"],
                0.12,
                "M0 2240 l0 -2240 1990 0 1990 0 0 2240 0 2240 -1990 0 -1990 0 0 -2240z"
        ),
        scratch: new toolItem(
                "blue", 
                "Scratch",
                "path",
                "S",
                "btn-default",
                [
                    "M 610 2270 c -14 -4 -38 -11 -53 -14 c -44 -10 -21 -26 36 -26 c 35 0 70 -9 107 -26 c 151 -72 223 -86 335 -66 c 52 10 232 -28 329 -68 c 39 -16 112 -39 163 -49 c 50 -11 119 -34 152 -50 c 36 -18 76 -31 98 -31 c 22 0 66 -13 103 -31 c 36 -17 103 -47 150 -66 c 80 -34 89 -35 165 -29 c 120 9 204 -26 406 -168 c 25 -17 86 -47 136 -64 c 58 -21 121 -54 175 -91 c 131 -91 167 -109 273 -136 c 76 -20 122 -39 193 -82 c 51 -30 95 -54 97 -52 c 10 10 -78 104 -163 174 c -54 45 -115 106 -146 148 c -43 59 -66 79 -117 106 c -35 18 -84 50 -109 70 c -44 37 -165 113 -227 145 c -18 9 -54 16 -81 16 c -40 0 -53 5 -76 29 c -16 17 -40 31 -55 33 c -15 2 -30 12 -36 26 c -7 15 -18 22 -37 22 c -16 0 -28 5 -28 10 c 0 6 -10 10 -22 10 c -12 0 -40 11 -62 24 c -23 13 -66 29 -97 35 c -30 7 -107 29 -170 51 c -63 22 -126 40 -141 40 c -15 0 -30 5 -33 10 c -4 6 -28 7 -60 4 c -49 -6 -56 -4 -74 17 l -19 24 l -24 -22 c -31 -29 -39 -29 -68 2 c -14 15 -35 25 -51 25 c -15 0 -31 5 -34 10 c -4 6 -41 10 -88 9 c -45 -1 -99 3 -120 10 c -21 7 -82 14 -135 16 c -53 2 -101 3 -107 4 c -5 0 -48 -2 -93 -5 c -56 -4 -88 -2 -95 5 c -13 13 -258 14 -297 1 Z",
                    "M 335 1881 c -6 -4 -61 -13 -124 -20 c -62 -6 -120 -16 -127 -22 c -23 -19 3 -39 50 -39 c 44 0 226 -39 305 -65 c 27 -8 67 -31 89 -51 c 33 -28 58 -38 132 -54 c 50 -11 118 -28 153 -39 c 34 -10 106 -28 159 -40 c 53 -11 163 -44 245 -71 c 81 -28 171 -58 198 -67 c 28 -8 77 -24 111 -34 c 41 -13 75 -17 105 -13 c 37 5 47 3 63 -15 c 13 -15 31 -21 59 -21 c 29 0 46 -6 62 -24 c 13 -14 42 -30 66 -37 c 24 -6 51 -20 60 -30 c 16 -18 45 -27 162 -49 c 39 -8 69 -21 92 -41 c 32 -29 35 -29 80 -18 c 44 11 51 10 99 -14 c 112 -58 345 -156 406 -172 c 36 -9 80 -26 98 -37 c 18 -11 65 -29 105 -39 c 69 -18 103 -25 226 -50 c 44 -9 65 -21 105 -59 c 59 -55 204 -125 303 -145 c 38 -8 74 -22 93 -39 c 31 -26 70 -35 70 -16 c 0 6 -4 10 -9 10 c -5 0 -16 16 -26 36 c -9 20 -31 43 -48 53 c -17 9 -44 28 -60 43 c -17 16 -34 28 -40 28 c -12 0 -65 43 -122 98 c -24 23 -52 42 -63 42 c -10 0 -36 14 -57 30 c -21 17 -42 30 -47 30 c -6 0 -28 16 -50 35 c -22 19 -79 50 -127 70 c -47 20 -117 55 -155 78 c -72 43 -155 76 -193 77 c -13 0 -23 4 -23 9 c 0 13 -59 41 -87 41 c -13 0 -26 7 -29 15 c -4 8 -17 15 -31 15 c -30 0 -58 14 -100 50 c -17 16 -49 34 -70 40 c -21 7 -57 26 -80 42 c -23 15 -65 33 -93 38 c -27 5 -63 16 -78 24 c -15 8 -71 24 -123 36 c -96 23 -140 40 -171 68 c -14 12 -21 12 -33 2 c -12 -10 -19 -8 -41 9 c -15 12 -31 21 -36 21 c -5 0 -43 14 -85 30 c -46 18 -93 30 -122 30 c -26 0 -73 9 -106 21 c -49 17 -65 19 -99 10 c -36 -9 -43 -8 -58 9 c -11 14 -29 20 -56 20 c -22 0 -55 7 -75 15 c -19 8 -73 17 -119 19 c -105 5 -279 38 -338 64 c -27 12 -94 24 -170 32 c -69 7 -143 18 -165 26 c -48 16 -48 16 -60 5 Z",
                    "M66 1451 c-73 -7 -90 -31 -22 -31 69 0 120 -23 381 -174 48 -28 131 -63 206 -87 70 -22 169 -60 220 -86 52 -25 141 -65 199 -89 58 -25 146 -69 195 -99 101 -61 128 -72 200 -86 27 -5 84 -23 126 -39 42 -16 124 -36 183 -45 58 -9 123 -22 143 -30 92 -33 204 -85 229 -104 33 -26 143 -61 193 -61 20 0 59 -12 86 -25 28 -14 55 -25 61 -25 6 0 31 -16 55 -35 24 -19 103 -60 175 -91 73 -30 142 -66 155 -80 14 -14 34 -24 51 -24 16 0 31 -6 34 -14 3 -8 19 -16 36 -20 16 -3 43 -17 60 -31 16 -14 37 -25 45 -25 9 0 44 -16 79 -35 131 -73 404 -144 404 -104 0 16 -54 63 -120 104 -25 15 -67 47 -95 70 -60 51 -93 68 -160 84 -57 14 -70 22 -107 72 -17 23 -40 40 -66 47 -25 8 -50 25 -66 47 -15 19 -32 35 -38 35 -6 0 -42 16 -79 35 -38 19 -75 35 -83 35 -8 0 -28 11 -44 25 -16 13 -50 34 -76 45 -26 11 -67 34 -92 50 -24 17 -59 36 -76 42 -18 6 -47 21 -65 34 -18 12 -53 25 -79 29 -26 4 -90 22 -143 42 -53 19 -143 50 -201 70 -97 32 -167 62 -230 98 -14 8 -37 15 -52 15 -15 0 -31 7 -36 17 -6 10 -60 29 -159 54 -83 20 -170 47 -194 58 -27 13 -62 21 -96 21 -36 0 -80 10 -131 30 -42 16 -110 36 -150 43 -54 11 -80 21 -102 42 -24 23 -35 27 -63 22 -39 -6 -196 43 -267 85 -33 18 -65 27 -117 31 -45 4 -96 16 -135 32 -74 32 -93 34 -172 26z"
                ],
                0.19,
                "M0 1140 l0 -1140 1890 0 1890 0 0 1140 0 1140 -1890 0 -1890 0 0 -1140z"
        ),
        renew: new toolItem(
                "green",
                "Renew",
                "path",
                "C",
                "btn-default",
                ["M820 2014 c-21 -9 -172 -151 -389 -367 -414 -413 -424 -427 -390 -552 15 -54 136 -178 195 -201 64 -25 139 -16 195 23 24 18 141 129 259 247 l215 216 640 -640 c444 -443 651 -644 677 -655 50 -20 124 -19 173 4 22 10 70 50 107 89 67 71 88 113 88 177 0 81 -16 98 -806 887 -530 529 -770 762 -796 773 -47 19 -122 19 -168 -1z"],
                0.22,
                "M0 1050 l0 -1050 1320 0 1320 0 0 1050 0 1050 -1320 0 -1320 0 0 -1050z"
        ),
        //scuff: new toolItem("brown", "Scuff", "circle", "SC", "btn-default"),
        //other: new toolItem("gray", "Other", "circle", "O", "btn-default"),
    }

    toolbar = this;
    $("#" + divElementId).hide();
    $("#" + divElementId).addClass("btn-group");
    $("#" + divElementId).attr("role", "group");
    $("#" + divElementId).attr("area-label", "...");

    $.each(this.items, function (index, item) {
        btnHtml = $('<buton class="btn ' + item.buttonClass + ' toolbarItem" data-key="' + index + '" style="color:'+item.color+'">' + item.label + '</button>');
        $("#" + divElementId).append(btnHtml);
    });


    $(document).on("click", ".toolbarItem", function () {
        if ($(this).hasClass("active")) {
            diselectItem();
        } else {
            selectItem(this);
        }
    });

    function selectItem(element) {
        $(element).addClass("active");
        if (toolbar.currentOption !== false)
            $(toolbar.currentOption).removeClass("active");

        toolbar.currentOption = element;
    }

    function diselectItem() {
        if (toolbar.currentOption !== false)
            $(toolbar.currentOption).removeClass("active");
        toolbar.currentOption = false;
    }

    function getCurrentOptionDetail(){
        return toolbar.items[$(toolbar.currentOption).attr("data-key")];
    }
    
    function show(){
        $("#"+toolbar.elementId).show();
        $("#"+toolbar.elementId).css("display", "table");
    }
    
    function hide(){
        $("#"+toolbar.elementId).hide();
    }
}
